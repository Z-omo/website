/*
 * SASS for navigation elements - website.com
 */

// @TODO move to colour theme:
$navBGColour: rgba($color4, 0.8)

$mobileRibbonHeight: $iconSize + (2 * $viewEdgePos)

//—————————————————————————————————————————————: Default view
nav
  background-color: $primary

  ul
    list-style: none
    margin: 0
    padding: $contentPadding 0

  li
    margin: 0 auto ($contentMargin * 0.5)
    width: 80%
  
  a
    display: block
    +corners(2em)
    border: solid 1px $color4
    padding: 0.8em 2em
    text-decoration: none
    font-size: 1.2rem
    color: white
    //text-transform: uppercase
    //font-family: "ff-meta-web-pro", sans-serif
    text-align: center
    background-color: $navBGColour

.boundary > header
  a[href="#menu"] // <noscript>
    @media only screen and (max-width: $tabletWidth) // mobile only
      +setAsIcon
      +setIcon(menu)

      top: $viewEdgePos
      right: $viewEdgePos
      left: auto
      z-index: 100

    @media only screen and (min-width: $tabletWidth)
      display: none


//—————————————————————————————————————————————: Mobile and JS enabled only
.focus-js nav
  position: fixed
  top: 0
  right: 0
  bottom: auto
  left: 0
  width: 100%
  height: $mobileRibbonHeight
  background-color: transparent
  //+gradientBackground(rgba($primary, 0.8), $primary)
  z-index: 100

  &::before
    content: ''
    display: block
    position: absolute
    top: 0
    right: 0
    bottom: 0
    left: 0
    background-color: rgba($primary, 0.8)
    z-index: -1
    transition: opacity $transDurationIn ease-out
    opacity: 0

  @media only screen and (max-width: $tabletWidth)  
    ul
      //margin-top: $mobileRibbonHeight
      //padding-bottom: $mobileRibbonHeight
      padding-top: $mobileRibbonHeight + $contentPadding
      background-color: rgba($primary, 0.9)
      transition-property: transform, opacity
      transition-duration: $transDurationIn, $transDurationIn
      transition-timing-function: $easeOutQuint, ease-in-out
      -webkit-transform: translateY(-114%)
      transform: translateY(-114%)
      opacity: 0

    &.open ul
      transition-duration: $transDurationIn * 2, $transDurationIn * 2.8
      -webkit-transform: translateY(0%)
      transform: translateY(0%)
      opacity: 1

  #menuBtn
    position: fixed
    top: 0
    right: 0//$iconSize
    bottom: auto//50vh//6rem
    left: auto
    //+corners(50% 0 0 50%)
    width: $mobileRibbonHeight
    height: $mobileRibbonHeight
    //background-color: rgba($primary, 0.8)
    //box-shadow: 0 0 1px 1px rgba($primary, 0.3)
    //transform: translateY(50%)

    @media only screen and (min-width: $tabletWidth)
      display: none
    
    &::after
      content: ''
      +setAsIcon
      +setIcon(menu)
      top: ($mobileRibbonHeight - $iconSize) / 2
      right: ($mobileRibbonHeight - $iconSize) / 2
      left: auto
      transition: transform $transDurationIn $easeSpecial

  &.open #menuBtn

    &::after
      transition-duration: $transDurationIn * 2
      -webkit-transform: rotate(-145deg)
      transform: rotate(-145deg)

  .home-link
    +setAsIcon
    top: auto
    left: $viewEdgePos
    bottom: $viewEdgePos + 0.1rem
    background-image: url('#{$imagePath}on-focus-logo.svg')
    width: 44px
    padding-top: 30px
    opacity: 0.8

.js-scrolled nav::before
    opacity: 1

//—————————————————————————————————————————————: Tablet and above.
@media only screen and (min-width: $tabletWidth)
  nav
    position: absolute
    top: 0
    left: auto
    padding: 0
    width: 100%
    max-width: $maxWidth
    z-index: 100
    background-color: transparent

    .focus-js &
      position: fixed

    ul
      padding: $contentPadding / 2

      display: flex
      flex-direction: row
      justify-content: flex-end

      // for browsers with no flex support:
      text-align: right

    li
      margin: 0
      padding: 0
      width: auto

      // for browsers with no flex support:
      display: inline-block
      
    a
      border: none
      padding: 0 1.8em
      font-size: 1.1rem
      background-color: transparent
      transition-property: background-color, color
      transition-duration: $transDurationOut, $transDurationOut * 2
      transition-timing-function: ease-out, ease-out
      
      &:hover
        background-color: $navBGColour
        transition-duration: $transDurationIn, $transDurationIn * 2
        color: $primary

    .active a
        background-color: rgba($color2, 0.4)
        color: white

  // nav::before
  //   content: ''
  //   display: block
  //   position: absolute
  //   top: 0
  //   right: 0
  //   bottom: 0
  //   left: 0
  //   background-color: rgba($primary, 0.8)
  //   z-index: -1
  //   transition: opacity $transDurationIn ease-out
  
  // .focus-js nav::before
  //   opacity: 0

  // .js-scrolled nav::before
  //   opacity: 1

@media only screen and (min-width: $desktopWidth)
  nav
    a
      padding: 0.2em 3em
      font-size: 1.2rem

@media only screen and (min-width: $maxWidth)
  nav
    a
      padding: 0.2em 3em
      font-size: 1.6rem
      